
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title> Asuncion Optical </title>

    <!-- Custom CSS only -->
    <link rel="stylesheet" href="css/style.css" >
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">

    <!-- Custom CSS only -->
    <link rel="stylesheet" href="css/style.css" >
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" integrity="sha384-3AB7yXWz4OeoZcPbieVW64vVXEwADiYyAEhwilzWsLw+9FgqpyjjStpPnpBO8o8S" crossorigin="anonymous">
    
</head>

<body>

<div id="signup">
<div id ="main" >
<div class="container mt-4 " id="content">
	<div class="row content d-flex justify-content-center">
		<div class="col col-md-6">
			<span id="message"></span>
			<div class="card">
				<div class="card-header">Register</div>
				<div class="card-body">
					<div id="patient_register_form">
						<div class="form-group">
							<label>Patient Email Address<span class="text-danger">*</span></label>
							<input type="text" name="patient_email_address" id="patient_email_address" class="form-control" required />
						</div>
						<div class="form-group">
							<label>Patient Password<span class="text-danger">*</span></label>
							<input type="password" name="patient_password" id="patient_password" class="form-control" required  />
						</div>
						<div class="row">
							<div class="col-md-6">
								<div class="form-group">
									<label>Patient First Name<span class="text-danger">*</span></label>
									<input type="text" name="patient_first_name" id="patient_first_name" class="form-control" required   />
								</div>
							</div>
							<div class="col-md-6">
								<div class="form-group">
									<label>Patient Last Name<span class="text-danger">*</span></label>
									<input type="text" name="patient_last_name" id="patient_last_name" class="form-control" required   />
								</div>
							</div>
						</div>
						<div class="form-group">
							<label>Patient Gender<span class="text-danger">*</span></label>
								<select name="patient_gender" id="patient_gender" class="form-control">
									<option value="Male">Male</option>
									<option value="Female">Female</option>
									<option value="Other">Other</option>
								</select>
						</div>
						<div class="form-group">
							<label>Patient Contact No.<span class="text-danger">*</span></label>
							<input type="text" name="patient_phone_no" id="patient_phone_no" class="form-control" required   />
						</div>
						<div class="form-group">
							<label>Patient Complete Address<span class="text-danger">*</span></label>
							<textarea name="patient_address" id="patient_address" class="form-control" style="resize: none; height:100px;"required ></textarea>
						</div>
						<div class="form-group text-center">
							<button type="submit" name="patient_register_button" id="patient_register_button" class="btn btn-primary" value="Register" >Register</button>
						</div>

						<div class="form-group text-center">
							<p><a href="login.php">Login</a></p>
						</div>
					</div>
				</div>	
			</div>
			<br />
			<br />
		</div>
	</div>
</div> 
</div>
</div>   


<!-- Copyright -->
<footer id="footer">

  <div class="text-center p-4" style="background-color: rgba(0, 0, 0, 0.05);">
	Â© 2021 Copyright:
	<a class="text-reset fw-bold" href="../index.php">Asuncion Optical</a>
  
</div>

</footer>
<!-- Footer -->
<!--scroll top-->
<!--scroll top-->




<!-- JavaScript Bundle with Popper -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.7.0/firebase-storage.js"></script>
<script src="../js/firebase.js"></script>
<script src="../js/database.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj" crossorigin="anonymous"></script>
<script src="../js/mark.js"></script>
<script>
	var parent = document.getElementById("signup");
	var dictionary = {};
	
	markAddEventListener("form_submit",parent,(array)=>{
		var error = false;
		
		for(var i in array){
			var input = array[ i ];
			
			if(input.value == ""){
				alert("Form must not empty");
				error=true;
				return;
			}
			
			dictionary[input.name] = input.value;
		}
		
		if(!error){
			var path = "public/user-5aBc44233/";
			
			dbfirebase_read_data(path,(json)=>{
				console.log(json);
				if(json["create_account"]){
					var gen_id ="";
					
					while(true){
						var found = false;
						gen_id = markGenId(10);
						gen_id = dictionary.patient_last_name+"-"+gen_id;
						for(var key in json["create_account"]){
							if(gen_id == key){
								found = true;
								break;
							}
						}
						if(!found){
							break;
						}
					}
					
					path += "create_account/"+gen_id;
					dbfirebase_write_data(path,dictionary);
					console.log("success");
					console.log(path);
					console.log(dictionary);
				}else{
					var gen_id =markGenId(10);
					gen_id = dictionary.patient_last_name+"-"+gen_id;
					path += "create_account/"+gen_id;
					dbfirebase_write_data(path,dictionary);
					console.log("success");
					console.log(path);
					console.log(dictionary);
				}
			},(err)=>{
				console.log(err);
			})
		}
		
	},true);
	
	
</script>
<!-- Custom Js -->

</body>
</html>
